#!/bin/bash

## Open the site or admin in your default browser
##
## Usage: open [service]
##        ddev open      # Opens the site
##        ddev open cms  # Opens WordPress admin

SERVICE="${1:-}"

if [ "$SERVICE" = "cms" ] || [ "$SERVICE" = "admin" ]; then
    echo "Opening WordPress admin..."
    if command -v xdg-open >/dev/null 2>&1; then
        xdg-open "https://${DDEV_SITENAME}.ddev.site/wp-admin"
    elif command -v open >/dev/null 2>&1; then
        open "https://${DDEV_SITENAME}.ddev.site/wp-admin"
    else
        echo "Please open https://${DDEV_SITENAME}.ddev.site/wp-admin in your browser"
    fi
else
    echo "Opening site..."
    if command -v xdg-open >/dev/null 2>&1; then
        xdg-open "https://${DDEV_SITENAME}.ddev.site"
    elif command -v open >/dev/null 2>&1; then
        open "https://${DDEV_SITENAME}.ddev.site"
    else
        echo "Please open https://${DDEV_SITENAME}.ddev.site in your browser"
    fi
fi