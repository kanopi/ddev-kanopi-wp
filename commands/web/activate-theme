#!/bin/bash

## Activate the custom theme
##
## Usage: ddev activate-theme

#ddev-generated

# Load configuration from YAML
CONFIG_FILE="/var/www/html/.ddev/config.kanopi.yaml"
if [ -f "$CONFIG_FILE" ]; then
    WP_THEME_SLUG=$(yq eval '.theme.slug // "struts"' "$CONFIG_FILE" 2>/dev/null || echo "struts")
else
    WP_THEME_SLUG="struts"
fi

echo "Activating theme: $WP_THEME_SLUG"

# Activate the theme
wp theme activate "$WP_THEME_SLUG" --allow-root

echo "Theme '$WP_THEME_SLUG' activated successfully!"