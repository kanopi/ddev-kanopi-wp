name: ddev-kanopi-wp

# Minimum DDEV version required
ddev_version_constraint: ">= 1.24.3"

project_files:
- docker-compose.kanopi-wp.yaml
- commands/web/create-block
- commands/web/development
- commands/web/production
- commands/web/refresh
- commands/web/activate-theme
- commands/web/restore-admin-user
- commands/web/open
- commands/host/phpcs
- commands/host/phpcbf
- commands/host/npm
- commands/host/terminus
- config/php/php.ini
- config/nginx/nginx-site.conf
- config/wp/block-template/block.json
- config/wp/block-template/edit.js
- config/wp/block-template/editor.scss
- config/wp/block-template/index.js
- config/wp/block-template/save.js
- config/wp/block-template/style.scss
- config/wp/block-template/view.js
- config.kanopi.yaml

post_install_actions:
# Create local configuration file if it doesn't exist
- |
  if [ ! -f .ddev/config.kanopi.yaml ]; then
    cp config.kanopi.yaml .ddev/config.kanopi.yaml
    echo "Created .ddev/config.kanopi.yaml - please edit with your configuration"
  fi
- echo "ddev-kanopi-wp add-on installed successfully!"
- echo "Please configure .ddev/config.kanopi.yaml with your Pantheon site details and license keys"
- echo "Run 'ddev restart' to apply the new configuration"

removal_actions:
- rm -f config.kanopi.yaml
- rm -f .ddev/config.kanopi.yaml
- echo "ddev-kanopi-wp add-on removed successfully"